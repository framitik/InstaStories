{% extends 'base.html' %}

{% block header %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/homepage_style.css') }}">
{% endblock %}

{% block content %}
    <!-- TWO COLUMNS CONTAINER -->
    <div class="custom-container">
        <div class="row">
            <div class="col-sm centered-text">
                <!-- INPUT COLUMN -->
                <div class="main-desc">Welcome to the Instagram stories scraper! <br> Please complie the following forms to start.</div>
                <form action="/" method="POST">
                    <!-- DESC AND INPUTS ROW -->
                    <div class="row">
                        {% if empty_form %}
                            <div style="width: 100%;"><p class="text-danger text-center">You must enter a number in range -1 to infinite</p></div>
                        {% endif %}
                        {% if not logged_in %}
                            <div style="width: 100%;"><p class="text-danger text-center">You must login in the "Settings" page before proceed</p></div>
                        {% endif %}
                        <div class="col-sm-8 right-aligned-text">
                            <div class="main-text">Insert the number of people to scrape: </div>
                            <div class="main-text">Insert the scraping mode: </div>
                        </div>
                        <div class="col-sm-2">
                            <input type="text" name="amountToScrape" class="custom-input"/>
                            <select name="mode_dropdown" class="btn btn-success custom-dropdown">
                                <option value="all">All</option>
                                <option value="media">Only media</option>
                                <option value="metadata">Only metadata</option>
                            </select>
                            <button name="scrapeBtn" type="submit" value="False"  class="btn btn-warning custom-btn">Start scrape</button>
                        </div>
                    </div>
                </form>
                <!-- OUTPUT VALUES ROW-->
                <form method="GET">
                    <div class="row justify-content-center return-values">
                        <div class="col-sm-3">
                            <div class="counters-text">Total images scraped:<br>{{count_i}}</div>
                        </div>
                        <div class="col-sm-3">
                            <div class="counters-text">Total videos scraped:<br>{{count_v}}</div>
                        </div>
                    </div>
                </form>
                <!-- LOG ROW -->
                <div class="logs-container">
                    <div class="main-text">Last scraping logs:</div>  
                    <div>
                        {% for log_line_element in log_lines %}
                            <li>{{ log_line_element }} </li>
                        {% endfor %}
                    </div>
                </div>
                <!-- END OF INPUT COLUMN -->
            </div>
            <div class="col-sm">
                <!-- OUTPUT COLUMN -->
                <div class="main-desc centered-text">Your scraped images should appear here:</div>
                <div class="flex-container">
                    <div class="images-window">
                        {% for image in images %}
                            {{ image }}
                        {% endfor %}
                    </div>
                </div>
                <!-- END OF OUTPUT COLUMN -->
            </div>
        </div>
    </div>

{% endblock %}
