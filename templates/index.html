{% extends 'base.html' %}

{% block header %}
{% endblock %}

{% block content %}

    <div class="index-logo">
        <a href="/"><img src="/static/images/logo.png" alt=""></a>
        <h1>InstaStories</h1>
    </div>
    <form action="/" method="POST">
        <div class="index-scraping-sect">
            {% if disclaimer['logged_in_error'] %}
                <div class="errors">You must login in settings before start scraping</div>
            {% endif %}
            <ul>
                <li><h3>Insert the number of people to scrape</h3></li>
                <li><input type="text" name="amountToScrape" class="input"/></li>
                <li><button class="btn" name="scrapeBtn" value="False" type="submit">START SCRAPE</button></li>
            </ul>
            <ul class="index-settings-btn">
                <li><div class="btn sub-btn" onclick="setPanel('logs')">LOGS</div></li>
                <li><div class="btn sub-btn" onclick="setPanel('images')">LAST SCRAPED IMAGES</div></li>
                <li><div class="btn sub-btn" onclick="setPanel('advanced')">ADVANCED</div></li>
            </ul>
            <div class="index-logs" id="index-logs">
                <h2>LOGS</h2>
                <ul>
                    {% for log_line_element in log_lines %}
                        <li>{{ log_line_element }} </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="index-images" id="index-images">
                <h2>LAST SCRAPED IMAGES</h2>
                {% for image in images %}
                    {{ image }}
                {% endfor %}
            </div>

            <div class="index-advanced" id="index-advanced">
                <div class="index-mode">
                    <h2>SCRAPING MODE</h2>
                    <div class="checkgroup"><label for="all">All</label><input class="radio-btn" name="mode_dropdown" type="radio" value="all" id="all" checked /></div>
                    <div class="checkgroup"><label for="media">Media</label><input class="radio-btn" name="mode_dropdown" type="radio" value="media" id="media" /></div>
                    <div class="checkgroup"><label for="metadata">Metadata</label><input class="radio-btn"  name="mode_dropdown" type="radio" value="metadata" id="metadata" /></div>
                </div>
            </div>

        </div>
    </form>

    <script>   
        function hideById(id) {
            document.getElementById(id).style.display = "none";
        }

        function showById(id) {
            document.getElementById(id).style.display = "block";
        }

        function setPanel(panelName) {
            console.log(panelName);
            for (const id of ["index-logs", "index-advanced", "index-images"]) {
                id.endsWith(panelName) ? showById(id) : hideById(id);
            } 
        }
    </script>

{% endblock %}
